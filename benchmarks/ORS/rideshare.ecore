<?xml version="1.0" encoding="UTF8"?>
<ecore:EPackage xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore" name="rideshare" nsURI="http://www.example.org/rideshare" nsPrefix="rideshare">
  <eAnnotations source="http://www.ustb.edu.cn/sei/mde/EnhancedCodeGen">
    <details key="requirement" value="The system shall support the management of ridesharing services by enabling customers to book trips offered by drivers. The system should maintain information about customers, drivers, trips, bookings, and membership packages. Key functionalities include checking booking eligibility, managing trip seats, calculating discounted prices based on membership packages, computing monthly reward points, and preventing time conflicts for drivers' trips. The system shall ensure that bookings are valid, do not overlap, and that trips are properly updated. It shall also manage the association between customers and their membership packages, including various awards. Overall, the system is designed to efficiently manage ridesharing operations, enhance customer experience through rewards and discounts, and provide a robust platform for drivers to offer their services.&#xA;&#xA;+ &quot;Validate Booking Eligibility&quot;: Check if a customer can book seats on a trip. Eligibility: Trip must exist and have available seats. The number of available seats on the trip ≥ the number of booking seats. There are no overlapping time periods between existing bookings booked by customer and the new booking time on the same day. The current booking time must be at least 2 hours earlier than the departure time of the trip(excluding the case where it is exactly 2 hours). If a customer can book seats on a trip, return true and update the number of seats of the trip. &#xA;&#xA;+ &quot;Calculate Discounted Trip Price&quot;: Compute the final price for a booking after applying reward discounts (the discount is always 20%off). Discount applies only if the booking is made by customer with membership and the booking time is ≥24 hours before departure. Return the final price (Keep 1 decimal places) if conditions are met, otherwise, return original price.&#xA;&#xA;+ &quot;Check Stop Overlap for Indirect Trips&quot;: Determine if two indirect trips (have ≥1 stop) by the same driver share any common stops. Return true if any stop station is shared.&#xA;&#xA;+ &quot;Compute Monthly Reward Points&quot;: Calculate total reward points earned by a customer in the given current month. Preconditions: The customer must have a membership with a points reward. Calculation rules: Only calculate the bookings whose booking dates are within the target month. 5 points per seat per booking. Return totalPoints = sum(seats * 5) for eligible bookings.&#xA;&#xA;+ &quot;Validate Trip Posting Feasibility&quot;: Preconditions: The driver must exist and be valid; The new trip time must be valid (departure &lt; arrival). Check if there are time conflicts between the new trip and the existed trips (The time period of the new trip intersects with that of any existing trip. Completely identical time periods are considered a conflict. Adjacent boundaries (e.g., A ends = B starts) are not considered a conflict.) Return true if no time conflict.&#xA;"/>
  </eAnnotations>
  <eClassifiers xsi:type="ecore:EClass" name="User" abstract="true">
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="ID" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="email" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="phoneNumber" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="Driver" eSuperTypes="#//User">
    <eOperations name="checkStopOverlap" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBoolean">
      <eAnnotations source="http://www.ustb.edu.cn/sei/mde/EnhancedCodeGen">
        <details key="generated" value="true"/>
      </eAnnotations>
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// TODO: Please generate a body of this unimplemented method based on the docstring&#xD;&#xA;// TODO: Replace the current body with the generated body &#xD;&#xA;// TODO: Ensure that you mark it @generated NOT after code completion&#xD;&#xA;throw new UnsupportedOperationException();&#xD;&#xA;"/>
      </eAnnotations>
      <eParameters name="trip1" eType="#//Trip"/>
      <eParameters name="trip2" eType="#//Trip"/>
    </eOperations>
    <eOperations name="canPostTrip" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBoolean">
      <eAnnotations source="http://www.ustb.edu.cn/sei/mde/EnhancedCodeGen">
        <details key="generated" value="true"/>
      </eAnnotations>
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// TODO: Please generate a body of this unimplemented method based on the docstring&#xD;&#xA;// TODO: Replace the current body with the generated body &#xD;&#xA;// TODO: Ensure that you mark it @generated NOT after code completion&#xD;&#xA;throw new UnsupportedOperationException();&#xD;&#xA;"/>
      </eAnnotations>
      <eParameters name="newtrip" eType="#//Trip"/>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EReference" name="trips" upperBound="-1"
        eType="#//Trip" containment="true" eOpposite="#//Trip/driver"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="Customer" eSuperTypes="#//User">
    <eOperations name="computeMonthlyRewardPoints" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt">
      <eAnnotations source="http://www.ustb.edu.cn/sei/mde/EnhancedCodeGen">
        <details key="generated" value="true"/>
      </eAnnotations>
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// TODO: Please generate a body of this unimplemented method based on the docstring&#xD;&#xA;// TODO: Replace the current body with the generated body &#xD;&#xA;// TODO: Ensure that you mark it @generated NOT after code completion&#xD;&#xA;throw new UnsupportedOperationException();&#xD;&#xA;"/>
      </eAnnotations>
      <eParameters name="currentMonth" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    </eOperations>
    <eOperations name="bookTrip">
      <eAnnotations source="http://www.ustb.edu.cn/sei/mde/EnhancedCodeGen">
        <details key="generated" value="true"/>
      </eAnnotations>
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// TODO: Please generate a body of this unimplemented method based on the docstring&#xD;&#xA;// TODO: Replace the current body with the generated body &#xD;&#xA;// TODO: Ensure that you mark it @generated NOT after code completion&#xD;&#xA;throw new UnsupportedOperationException();&#xD;&#xA;"/>
      </eAnnotations>
      <eParameters name="trip" eType="#//Trip"/>
      <eParameters name="numberOfSeats" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt"/>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EReference" name="membershipPackage" eType="#//MembershipPackage"
        containment="true" eOpposite="#//MembershipPackage/customer"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="bookings" upperBound="-1"
        eType="#//Booking" eOpposite="#//Booking/customer"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="Trip">
    <eOperations name="calculateDiscountedPrice" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble">
      <eAnnotations source="http://www.ustb.edu.cn/sei/mde/EnhancedCodeGen">
        <details key="generated" value="true"/>
      </eAnnotations>
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// TODO: Please generate a body of this unimplemented method based on the docstring&#xD;&#xA;// TODO: Replace the current body with the generated body &#xD;&#xA;// TODO: Ensure that you mark it @generated NOT after code completion&#xD;&#xA;throw new UnsupportedOperationException();&#xD;&#xA;"/>
      </eAnnotations>
      <eParameters name="customer" eType="#//Customer"/>
      <eParameters name="bookingTime" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    </eOperations>
    <eOperations name="calculateMonthlyPoints" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt">
      <eAnnotations source="http://www.ustb.edu.cn/sei/mde/EnhancedCodeGen">
        <details key="generated" value="true"/>
      </eAnnotations>
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// TODO: Please generate a body of this unimplemented method based on the docstring&#xD;&#xA;// TODO: Replace the current body with the generated body &#xD;&#xA;// TODO: Ensure that you mark it @generated NOT after code completion&#xD;&#xA;throw new UnsupportedOperationException();&#xD;&#xA;"/>
      </eAnnotations>
      <eParameters name="customer" eType="#//Customer"/>
      <eParameters name="currentMonth" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    </eOperations>
    <eOperations name="bookSeats" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBoolean">
      <eAnnotations source="http://www.ustb.edu.cn/sei/mde/EnhancedCodeGen">
        <details key="generated" value="true"/>
      </eAnnotations>
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// TODO: Please generate a body of this unimplemented method based on the docstring&#xD;&#xA;// TODO: Replace the current body with the generated body &#xD;&#xA;// TODO: Ensure that you mark it @generated NOT after code completion&#xD;&#xA;throw new UnsupportedOperationException();&#xD;&#xA;"/>
      </eAnnotations>
      <eParameters name="num" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt"/>
    </eOperations>
    <eOperations name="confirmBooking" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBoolean">
      <eAnnotations source="http://www.ustb.edu.cn/sei/mde/EnhancedCodeGen">
        <details key="generated" value="true"/>
      </eAnnotations>
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// TODO: Please generate a body of this unimplemented method based on the docstring&#xD;&#xA;// TODO: Replace the current body with the generated body &#xD;&#xA;// TODO: Ensure that you mark it @generated NOT after code completion&#xD;&#xA;throw new UnsupportedOperationException();&#xD;&#xA;"/>
      </eAnnotations>
      <eParameters name="seats" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt"/>
    </eOperations>
    <eOperations name="getStopStations" upperBound="-1" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString">
      <eAnnotations source="http://www.ustb.edu.cn/sei/mde/EnhancedCodeGen">
        <details key="generated" value="true"/>
      </eAnnotations>
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// TODO: Please generate a body of this unimplemented method based on the docstring&#xD;&#xA;// TODO: Replace the current body with the generated body &#xD;&#xA;// TODO: Ensure that you mark it @generated NOT after code completion&#xD;&#xA;throw new UnsupportedOperationException();&#xD;&#xA;"/>
      </eAnnotations>
    </eOperations>
    <eOperations name="isTimeConflicting" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBoolean">
      <eAnnotations source="http://www.ustb.edu.cn/sei/mde/EnhancedCodeGen">
        <details key="generated" value="true"/>
      </eAnnotations>
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// TODO: Please generate a body of this unimplemented method based on the docstring&#xD;&#xA;// TODO: Replace the current body with the generated body &#xD;&#xA;// TODO: Ensure that you mark it @generated NOT after code completion&#xD;&#xA;throw new UnsupportedOperationException();&#xD;&#xA;"/>
      </eAnnotations>
      <eParameters name="newDepartureTime" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
      <eParameters name="newArrivalTime" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="departureStation" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="arrivalStation" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="departureTime" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="arrivalTime" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="numberOfSeats" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="departureDate" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDate"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="price" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="bookings" upperBound="-1"
        eType="#//Booking" containment="true" eOpposite="#//Booking/trip"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="stops" upperBound="-1"
        eType="#//Stop" containment="true" eOpposite="#//Stop/trip"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="driver" lowerBound="1"
        eType="#//Driver" eOpposite="#//Driver/trips"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="Booking">
    <eOperations name="isBookingEligible" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBoolean">
      <eAnnotations source="http://www.ustb.edu.cn/sei/mde/EnhancedCodeGen">
        <details key="generated" value="true"/>
      </eAnnotations>
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// TODO: Please generate a body of this unimplemented method based on the docstring&#xD;&#xA;// TODO: Replace the current body with the generated body &#xD;&#xA;// TODO: Ensure that you mark it @generated NOT after code completion&#xD;&#xA;throw new UnsupportedOperationException();&#xD;&#xA;"/>
      </eAnnotations>
    </eOperations>
    <eOperations name="updateTripSeats">
      <eAnnotations source="http://www.ustb.edu.cn/sei/mde/EnhancedCodeGen">
        <details key="generated" value="true"/>
      </eAnnotations>
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// TODO: Please generate a body of this unimplemented method based on the docstring&#xD;&#xA;// TODO: Replace the current body with the generated body &#xD;&#xA;// TODO: Ensure that you mark it @generated NOT after code completion&#xD;&#xA;throw new UnsupportedOperationException();&#xD;&#xA;"/>
      </eAnnotations>
    </eOperations>
    <eOperations name="overlapsWith" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBoolean">
      <eAnnotations source="http://www.ustb.edu.cn/sei/mde/EnhancedCodeGen">
        <details key="generated" value="true"/>
      </eAnnotations>
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// TODO: Please generate a body of this unimplemented method based on the docstring&#xD;&#xA;// TODO: Replace the current body with the generated body &#xD;&#xA;// TODO: Ensure that you mark it @generated NOT after code completion&#xD;&#xA;throw new UnsupportedOperationException();&#xD;&#xA;"/>
      </eAnnotations>
      <eParameters name="trip" eType="#//Trip"/>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="numberOfSeats" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="bookingDate" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDate"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="customer" lowerBound="1"
        eType="#//Customer" eOpposite="#//Customer/bookings"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="trip" eType="#//Trip" eOpposite="#//Trip/bookings"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="Stop">
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="stopStation" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="trip" eType="#//Trip" eOpposite="#//Trip/stops"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="MembershipPackage">
    <eOperations name="hasAward" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBoolean">
      <eAnnotations source="http://www.ustb.edu.cn/sei/mde/EnhancedCodeGen">
        <details key="generated" value="true"/>
      </eAnnotations>
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// TODO: Please generate a body of this unimplemented method based on the docstring&#xD;&#xA;// TODO: Replace the current body with the generated body &#xD;&#xA;// TODO: Ensure that you mark it @generated NOT after code completion&#xD;&#xA;throw new UnsupportedOperationException();&#xD;&#xA;"/>
      </eAnnotations>
      <eParameters name="award" eType="#//Award"/>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="awards" upperBound="-1"
        eType="#//Award"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="customer" eType="#//Customer"
        eOpposite="#//Customer/membershipPackage"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EEnum" name="Award">
    <eLiterals name="CASHBACK"/>
    <eLiterals name="DISCOUNTS" value="1"/>
    <eLiterals name="POINTS" value="2"/>
  </eClassifiers>
</ecore:EPackage>
