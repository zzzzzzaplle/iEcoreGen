import java.util.ArrayList;
import java.util.List;

/**
 * Enumerates the possible positions a football player can have.
 */
enum Position {
    FORWARD,
    MIDFIELD,
    DEFENSE
}

/**
 * Base class that represents a generic football player.
 */
abstract class FootballPlayer {

    private String team;
    private String name;
    private int age;
    private int number;
    private Position position;
    /** Number of announcements generated by this player (goal scored or saved). */
    private int announcementsCount;

    /** Unparameterized constructor. */
    public FootballPlayer() {
        // default constructor
    }

    /* ---------- getters & setters ---------- */

    public String getTeam() {
        return team;
    }

    public void setTeam(String team) {
        this.team = team;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public int getNumber() {
        return number;
    }

    public void setNumber(int number) {
        this.number = number;
    }

    public Position getPosition() {
        return position;
    }

    protected void setPosition(Position position) {
        this.position = position;
    }

    public int getAnnouncementsCount() {
        return announcementsCount;
    }

    /** Increments the internal announcement counter. */
    protected void incrementAnnouncements() {
        announcementsCount++;
    }
}

/**
 * Represents a striker (forward) who can score goals.
 */
class Striker extends FootballPlayer {

    /** Unparameterized constructor. Sets position to FORWARD. */
    public Striker() {
        setPosition(Position.FORWARD);
    }

    /**
     * Announces a scored goal, prints the player's number and name,
     * and records the announcement.
     */
    public void scoreGoal() {
        incrementAnnouncements();
        System.out.println("Goal scored by #" + getNumber() + " " + getName());
    }
}

/**
 * Represents a goalkeeper (defender) who can save goals.
 */
class Goalkeeper extends FootballPlayer {

    /** Unparameterized constructor. Sets position to DEFENSE. */
    public Goalkeeper() {
        setPosition(Position.DEFENSE);
    }

    /**
     * Announces a saved goal, prints the player's number and name,
     * and records the announcement.
     */
    public void saveGoal() {
        incrementAnnouncements();
        System.out.println("Goal saved by #" + getNumber() + " " + getName());
    }
}

/**
 * Represents a midfielder who distributes the ball.
 */
class Midfielder extends FootballPlayer {

    /** Unparameterized constructor. Sets position to MIDFIELD. */
    public Midfielder() {
        setPosition(Position.MIDFIELD);
    }
}

/**
 * Represents a football team and provides operations required by the system.
 */
class Team {

    private String name;
    private final List<FootballPlayer> players;
    private final List<FootballPlayer> startingEleven;
    private final List<FootballPlayer> spareTeam;

    /** Unparameterized constructor. Initializes internal collections. */
    public Team() {
        this.players = new ArrayList<>();
        this.startingEleven = new ArrayList<>();
        this.spareTeam = new ArrayList<>();
    }

    /* ---------- getters & setters ---------- */

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

   public List<FootballPlayer> getPlayers() {
        return players;
    }

    public List<FootballPlayer> getStartingEleven() {
        return startingEleven;
    }

    public List<FootballPlayer> getSpareTeam() {
        return spareTeam;
    }

    /**
     * Adds a player to the team and places him either in the starting eleven
     * or in the spare team.
     *
     * @param player    the player to add
     * @param starter   true if the player belongs to the starting eleven,
     *                  false if the player belongs to the spare team
     */
    public void addPlayer(FootballPlayer player, boolean starter) {
        player.setTeam(this.name);
        players.add(player);
        if (starter) {
            startingEleven.add(player);
        } else {
            spareTeam.add(player);
        }
    }

    /**
     * Calculates the total number of goal‑scoring announcements generated by
     * the starting eleven players of this team. Only forwards (strikers) can
     * generate such announcements; goals scored by other positions are ignored.
     *
     * @return total number of goal‑scoring announcements for the starting eleven
     */
    public int calculateTotalGoalScoringAnnouncementsForStartingEleven() {
        int total = 0;
        for (FootballPlayer p : startingEleven) {
            if (p instanceof Striker) {
                total += p.getAnnouncementsCount();
            }
        }
        return total;
    }

    /**
     * Finds the midfielder with the highest shirt number within the whole team.
     *
     * @return the midfielder having the highest number, or {@code null} if no
     *         midfielders exist in the team
     */
    public Midfielder findMidfielderWithHighestNumber() {
        Midfielder best = null;
        for (FootballPlayer p : players) {
            if (p instanceof Midfielder) {
                Midfielder m = (Midfielder) p;
                if (best == null || m.getNumber() > best.getNumber()) {
                    best = m;
                }
            }
        }
        return best;
    }

    /**
     * Computes the average age of the players that belong to the spare team.
     *
     * @return average age as a {@code double}; returns {@code 0.0} if the spare
     *         team is empty
     */
    public double calculateAverageAgeOfSpareTeam() {
        if (spareTeam.isEmpty()) {
            return 0.0;
        }
        int sum = 0;
        for (FootballPlayer p : spareTeam) {
            sum += p.getAge();
        }
        return (double) sum / spareTeam.size();
    }

    /**
     * Counts the number of goal‑saving announcements made by all goalkeepers
     * in the team.
     *
     * @return total number of goal‑saving announcements; {@code 0} if none
     */
    public int countGoalSavingAnnouncements() {
        int total = 0;
        for (FootballPlayer p : players) {
            if (p instanceof Goalkeeper) {
                total += p.getAnnouncementsCount();
            }
        }
        return total;
    }

    /**
     * Calculates the total number of announcements made by all forwards
     * (strikers) on the team, regardless of whether they belong to the
     * starting eleven or the spare team.
     *
     * @return total number of forward announcements; {@code 0} if there are
     *         no forwards or no announcements
     */
    public int calculateTotalAnnouncementsByForwards() {
        int total = 0;
        for (FootballPlayer p : players) {
            if (p.getPosition() == Position.FORWARD) {
                total += p.getAnnouncementsCount();
            }
        }
        return total;
    }
}