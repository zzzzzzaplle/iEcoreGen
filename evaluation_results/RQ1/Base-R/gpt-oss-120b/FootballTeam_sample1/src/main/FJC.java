import java.util.ArrayList;
import java.util.List;
import java.util.Objects;

/**
 * Enumeration of possible player positions on the football field.
 */
enum Position {
    /** Offensive player, usually a striker. */
    FORWARD,
    /** Central player who distributes the ball. */
    MIDFIELD,
    /** The goalkeeper who protects the goal. */
    GOALKEEPER,
    /** Defensive players other than the goalkeeper. */
    DEFENSE
}

/**
 * Represents a football player with basic attributes and announcement counters.
 */
class FootballPlayer {

    /** Name of the team the player belongs to. */
    private String team;

    /** Player's full name. */
    private String name;

    /** Player's age. */
    private int age;

    /** Player's jersey number. */
    private int number;

    /** Position of the player on the field. */
    private Position position;

    /** Number of goal‑scoring announcements generated by this player
     *  (relevant only for forwards). */
    private int scoreAnnouncements;

    /** Number of goal‑saving announcements generated by this player
     *  (relevant only for goalkeepers). */
    private int saveAnnouncements;

    /** No‑argument constructor required by the specification. */
    public FootballPlayer() {
        // default values (null/0) are acceptable; setters can be used later
    }

    /**
     * Constructs a player with all mandatory fields.
     *
     * @param team      the team name
     * @param name      the player's name
     * @param age       the player's age
     * @param number    the player's jersey number
     * @param position  the player's position
     */
    public FootballPlayer(String team, String name, int age, int number, Position position) {
        this.team = team;
        this.name = name;
        this.age = age;
        this.number = number;
        this.position = position;
        this.scoreAnnouncements = 0;
        this.saveAnnouncements = 0;
    }

    /* ------------------- Getters & Setters ------------------- */

    public String getTeam() {
        return team;
    }

    public void setTeam(String team) {
        this.team = team;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public int getNumber() {
        return number;
    }

    public void setNumber(int number) {
        this.number = number;
    }

    public Position getPosition() {
        return position;
    }

    public void setPosition(Position position) {
        this.position = position;
    }

    public int getScoreAnnouncements() {
        return scoreAnnouncements;
    }

    public void setScoreAnnouncements(int scoreAnnouncements) {
        this.scoreAnnouncements = scoreAnnouncements;
    }

    public int getSaveAnnouncements() {
        return saveAnnouncements;
    }

    public void setSaveAnnouncements(int saveAnnouncements) {
        this.saveAnnouncements = saveAnnouncements;
    }

    /* ------------------- Announcement Helpers ------------------- */

    /**
     * Records a goal‑scoring announcement for this player.
     * Only meaningful when the player's position is {@link Position#FORWARD}.
     *
     * @throws IllegalStateException if the player is not a forward
     */
    public void announceGoalScored() {
        if (position != Position.FORWARD) {
            throw new IllegalStateException(
                "Only forwards can generate goal‑scoring announcements.");
        }
        scoreAnnouncements++;
        System.out.println("Goal scored by #" + number + " " + name);
    }

    /**
     * Records a goal‑saving announcement for this player.
     * Only meaningful when the player's position is {@link Position#GOALKEEPER}.
     *
     * @throws IllegalStateException if the player is not a goalkeeper
     */
    public void announceGoalSaved() {
        if (position != Position.GOALKEEPER) {
            throw new IllegalStateException(
                "Only goalkeepers can generate goal‑saving announcements.");
        }
        saveAnnouncements++;
        System.out.println("Goal saved by #" + number + " " + name);
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        FootballPlayer that = (FootballPlayer) o;
        return number == that.number &&
               Objects.equals(team, that.team);
    }

    @Override
    public int hashCode() {
        return Objects.hash(team, number);
    }
}

/**
 * Represents a football team that manages its players, the starting eleven,
 * and the spare (reserve) team. Provides operations required by the functional
 * specifications.
 */
class FootballTeam {

    /** Name of the football team. */
    private String teamName;

    /** All players belonging to the team. */
    private final List<FootballPlayer> players = new ArrayList<>();

    /** The eleven players that start a match. */
    private final List<FootballPlayer> startingEleven = new ArrayList<>();

    /** The players who are on the bench (reserve team). */
    private final List<FootballPlayer> spareTeam = new ArrayList<>();

    /** No‑argument constructor required by the specification. */
    public FootballTeam() {
        // empty constructor; teamName can be set via setter
    }

    /**
     * Constructs a team with a given name.
     *
     * @param teamName the name of the team
     */
    public FootballTeam(String teamName) {
        this.teamName = teamName;
    }

    /* ------------------- Getters & Setters ------------------- */

    public String getTeamName() {
        return teamName;
    }

    public void setTeamName(String teamName) {
        this.teamName = teamName;
    }

    public List<FootballPlayer> getPlayers() {
        return players;
    }

    public List<FootballPlayer> getStartingEleven() {
        return startingEleven;
    }

    public List<FootballPlayer> getSpareTeam() {
        return spareTeam;
    }

    /* ------------------- Player Management ------------------- */

    /**
     * Adds a player to the team roster.
     *
     * @param player the player to add; must not be {@code null}
     * @throws IllegalArgumentException if {@code player} is {@code null}
     */
    public void addPlayer(FootballPlayer player) {
        if (player == null) {
            throw new IllegalArgumentException("Player cannot be null.");
        }
        players.add(player);
    }

    /**
     * Assigns a player to the starting eleven.
     *
     * @param player the player to start; must be part of the team roster
     * @throws IllegalArgumentException if the player is not in the roster
     */
    public void setPlayerAsStarter(FootballPlayer player) {
        if (!players.contains(player)) {
            throw new IllegalArgumentException("Player must be part of the team first.");
        }
        if (!startingEleven.contains(player)) {
            startingEleven.add(player);
        }
        // Ensure the player is not also in the spare team
        spareTeam.remove(player);
    }

    /**
     * Assigns a player to the spare (reserve) team.
     *
     * @param player the player to move to reserve; must be part of the team roster
     * @throws IllegalArgumentException if the player is not in the roster
     */
    public void setPlayerAsSpare(FootballPlayer player) {
        if (!players.contains(player)) {
            throw new IllegalArgumentException("Player must be part of the team first.");
        }
        if (!spareTeam.contains(player)) {
            spareTeam.add(player);
        }
        // Ensure the player is not also in the starting eleven
        startingEleven.remove(player);
    }

    /* ------------------- Functional Requirements ------------------- */

    /**
     * Calculates the total number of goal‑scoring announcements generated by the
     * starting eleven players of this team. Only forwards can generate such
     * announcements; other positions are ignored.
     *
     * @return the sum of score announcements for all forwards in the starting eleven
     */
    public int calculateTotalScoreAnnouncementsForStartingEleven() {
        int total = 0;
        for (FootballPlayer p : startingEleven) {
            if (p.getPosition() == Position.FORWARD) {
                total += p.getScoreAnnouncements();
            }
        }
        return total;
    }

    /**
     * Identifies the midfielder with the highest jersey number among all players
     * of the team.
     *
     * @return the midfielder having the greatest {@code number} value,
     *         or {@code null} if the team has no midfielders
     */
    public FootballPlayer findMidfielderWithHighestNumber() {
        FootballPlayer result = null;
        for (FootballPlayer p : players) {
            if (p.getPosition() == Position.MIDFIELD) {
                if (result == null || p.getNumber() > result.getNumber()) {
                    result = p;
                }
            }
        }
        return result;
    }

    /**
     * Calculates the average age of the players that belong to the spare team.
     *
     * @return the arithmetic mean of ages as a {@code double};
     *         returns {@code 0.0} if the spare team contains no players
     */
    public double calculateAverageAgeOfSpareTeam() {
        if (spareTeam.isEmpty()) {
            return 0.0;
        }
        int sum = 0;
        for (FootballPlayer p : spareTeam) {
            sum += p.getAge();
        }
        return (double) sum / spareTeam.size();
    }

    /**
     * Counts the total number of goal‑saving announcements made by all
     * goalkeepers on the team.
     *
     * @return the sum of save announcements for every goalkeeper;
     *         returns {@code 0} if there are no goalkeepers or no announcements
     */
    public int countGoalSavingAnnouncements() {
        int total = 0;
        for (FootballPlayer p : players) {
            if (p.getPosition() == Position.GOALKEEPER) {
                total += p.getSaveAnnouncements();
            }
        }
        return total;
    }

    /**
     * Calculates the total number of announcements (goal‑scoring) made by all
     * forwards on the team, regardless of whether they are starters or reserves.
     *
     * @return the sum of score announcements for every forward;
     *         returns {@code 0} if there are no forwards or no announcements
     */
    public int calculateTotalAnnouncementsByForwards() {
        int total = 0;
        for (FootballPlayer p : players) {
            if (p.getPosition() == Position.FORWARD) {
                total += p.getScoreAnnouncements();
            }
        }
        return total;
    }
}